# Тестовое задание для стажера в Trood

Сервис REST API, через который пользователи могут создавать и проходить опросы.

### Стек

* Python 3.8
* Django 3.2
* djangorestframework
* Postgres
* Docker with Docker Compose


### Запуск приложения

- скачать репозиторий: `git clone https://github.com/Spartan327/Trood_Test.git`
- запуск проекта: `docker-compose up --build -d`  
- переменные окружения хранятся в файле: `.env`

* Запуск тестов

- установите `TESTING=1` в файле `.env`
- запустить проект:`docker-compose down -v && docker-compose up --build`


### Технические требования к заданию
Жирным выделены обязательные пункты, без которых работа рассматриваться не будет. Другие пункты - по возможности, если есть силы и время. Если не все пункты будут выполнены обязательно дайте знать по какой причине (не хватило времени/опыта и т.д.).
:heavy_check_mark: **Python**
:heavy_check_mark: **Postgres** (запускается через docker)
:heavy_check_mark: **Код выложен на github/bitbucket** (или аналог)
:heavy_check_mark: **Есть инструкция к запуску**
:heavy_check_mark: **Код покрыт тестами (pytest)**
CI/CD сборка и тесты (Travis/github actions и т.п.) `не успел выполнить + ранее не использовал`
:heavy_check_mark:  Docker (для самого проекта, крайне желательно)
:heavy_check_mark:  Вывод статистики по опросам (json, сколько людей прошло опрос, статистика ответов).
Сделать простой UI  и задеплоить проект. `не успел выполнить`


### Структура и функционал приложения
Пользователь может:
* создавать/редактировать/удалять опросы;
* создавать/редактировать/удалять вопросы;
* создавать/редактировать/удалять варианты ответов;
* отвечать на вопросы;

Каждый пользователь может редактировать только свои опросы/вопросы/ответы.
Каждый пользователь может проходить опросы отвечая на вопросы, ответы пользователя (один вопрос-один ответ для одного пользователя) сохраняются и в дальнейшем отоброжаются в виде счетчика при просмотре опросов/вопросов/ответов.

* Доступ к опросам:
` http://localhost:8000/api/polls/ `

GET запрос выводит список опросов 
POST запрос ожидает на вход 
``` {
    "title": "имя опроса"
}
```

`http://localhost:8000/api/polls/poll_id`

GET запрос выводит структуру опроса
PUT запрос ожидает на вход 
```
{
    "poll_id": poll_id,
    "owner": "имя владельца",
    "title": "имя опроса",  ``` принимает только изменение данного параметра 
``` 
    "questions": [{"question_id": id вопроса}], ``` список словарей вопросов 
```
    "votes_count": количество ответивших в данном опросе
}
```
DELETE удаляет опрос

* Доступ к вопросам:
http://localhost:8000/api/polls/poll_id/questions/

GET запрос выводит список вопросов текущего опроса
POST запрос ожидает на вход 
```{
    "question_text": ""
}
```

http://localhost:8000/api/polls/poll_id/questions/question_id

GET запрос выводит структуру вопроса
PUT запрос ожидает на вход 
```
{
    "question_id": question_id,
    "question_text": "текст опроса",  ``` принимает только изменение данного параметра 
``` 
    "answers": [{"answers_id": id ответа}], ``` список словарей ответов 
```
    "votes_count": количество ответивших на данный вопрос
}
```
DELETE удаляет вопрос

* Доступ к ответам:
http://localhost:8000/api/polls/poll_id/questions/question_id/answers

GET запрос выводит список ответов текущего вопроса
POST запрос ожидает на вход 
```{
    "answer_text": "вариант ответа"
}
```

http://localhost:8000/api/polls/poll_id/questions/question_id/answers/answer_id

GET запрос выводит структуру ответа
PUT запрос ожидает на вход 
```
{
    "answer_id": answer_id,
    "answer_text": "текст ответа",  ``` принимает только изменение данного параметра 
``` 
    "votes": [""], ``` список имен ответивших 

DELETE удаляет вопрос


* Доступ к прохождению опроса:
http://localhost:8000/api/votes/

GET запрос выводит список всех ответивших
POST запрос ожидает на вход 
```{
    "question": question_id,
    "answer": answer_id
}
```